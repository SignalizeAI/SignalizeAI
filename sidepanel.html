<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SignalizeAI Auth</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div class="container">
      <div id="login-view">
        <div class="login-header">
          <h1>SignalizeAI</h1>
          <p>Please sign in to access your extension features.</p>
        </div>

        <button id="google-signin">
          <img src="icons/google.svg" alt="Google" class="google-icon" />
          Sign in with Google
        </button>

        <p id="status-msg"></p>
      </div>

      <div id="welcome-view" class="hidden">
        <div class="dropdown-card">
          <div class="dropdown-header" id="dropdown-header">
            <div class="user-details">
              <span id="user-name" class="user-name-text">Loading...</span>
              <span id="user-email" class="user-email-text"
                >user@signalize.ai</span
              >
            </div>
            <div style="display: flex; align-items: center; gap: 12px">
              <div id="user-initial" class="user-avatar-placeholder">U</div>
              <img
                id="dropdown-chevron"
                src="icons/chevron-down.svg"
                alt=""
                class="dropdown-chevron"
              />
            </div>
          </div>

          <div class="dropdown-content" id="dropdown-content">
            <ul class="menu-list">
              <li>
                <a href="#" class="menu-item active">
                  <img src="icons/profile.svg" alt="" class="menu-icon" />
                  Profile
                </a>
              </li>
              <li>
                <a href="#" class="menu-item" id="menu-saved-analyses">
                  <img src="icons/bookmark.svg" alt="" class="menu-icon" />
                  Saved analyses
                </a>
              </li>
              <li>
                <a href="#" class="menu-item">
                  <img src="icons/community.svg" alt="" class="menu-icon" />
                  Community
                  <span class="badge badge-plus">+</span>
                </a>
              </li>
              <li>
                <a href="#" class="menu-item">
                  <img src="icons/subscription.svg" alt="" class="menu-icon" />
                  Subscription
                  <span class="badge badge-pro">PRO</span>
                </a>
              </li>
              <li>
                <a href="https://github.com/SignalizeAI/Signalize" class="menu-item" target="_blank" rel="noopener noreferrer">
                  <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 5v14"/><path d="M5 12h14"/><circle cx="12" cy="12" r="9"/></svg>
                  Contribute Code
                </a>
              </li>
              <li>
                <a href="#" class="menu-item">
                  <img src="icons/settings.svg" alt="" class="menu-icon" />
                  Settings
                </a>
              </li>
            </ul>

            <div class="menu-divider"></div>

            <ul class="menu-list">
              <li>
                <a href="#" class="menu-item">
                  <img src="icons/help.svg" alt="" class="menu-icon" />
                  Help center
                </a>
              </li>
              <li>
                <button id="sign-out" class="menu-item link-button">
                  <img src="icons/sign-out.svg" alt="" class="menu-icon" />
                  Sign out
                </button>
              </li>
            </ul>
          </div>
        </div>

        <!-- AI Business Analysis -->
        <div id="ai-analysis" class="website-content-card hidden">
          <div class="content-header">
            <h3 class="content-title">Website Information</h3>
            <div style="display:flex; gap:8px;">
              <button class="copy-btn" id="copyButton" title="Copy website info">
                <svg viewBox="0 0 24 24" class="copy-icon">
                  <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
              <button class="refresh-btn" id="refreshButton" title="Re-analyze">
                <svg viewBox="0 0 24 24" class="refresh-icon">
                  <path d="M21 12a9 9 0 1 1-3-6.7"/>
                  <polyline points="21 3 21 9 15 9"/>
                </svg>
              </button>
              <button class="save-btn" id="saveButton" title="Save">
                <svg viewBox="0 0 24 24" class="save-icon">
                  <path
                    d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
                  ></path>
                </svg>
              </button>
            </div>
          </div>

          <div id="ai-loading" class="content-loading hidden">
            <p>Analyzing business signals…</p>
          </div>

          <div id="ai-data" class="content-data hidden">
            <div class="content-section">
              <h4 class="section-label">Title</h4>
              <p id="ai-title-text" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">What they do</h4>
              <p id="ai-what-they-do" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">Target customer</h4>
              <p id="ai-target-customer" class="content-text">—</p>
            </div>

            <div class="content-section">
              <h4 class="section-label">Value proposition</h4>
              <p id="ai-value-prop" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">Sales readiness</h4>
              <p id="ai-sales-score" class="content-text">—</p>
            </div>

            <div class="content-section">
              <h4 class="section-label">Best sales persona recommendation</h4>
              <p id="ai-sales-persona" class="content-text">—</p>
              <p id="ai-sales-persona-reason" class="content-text" style="font-size: 13px; opacity: 0.8;">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">Sales angle</h4>
              <p id="ai-sales-angle" class="content-text">—</p>
            </div>

            <div class="content-section">
              <h4 class="section-label">Company overview</h4>
              <p id="ai-description-text" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">URL</h4>
              <a id="ai-url-text" href="#" target="_blank" class="content-url">—</a>
            </div>

          </div>
        </div>

        <!-- Saved Analyses -->
        <div id="saved-analyses" class="website-content-card hidden">
          <div class="content-header">
            <h3 class="content-title">Saved Analyses</h3>
            <div class="export-actions">
              <button
                id="export-menu-toggle"
                class="secondary-btn"
                aria-haspopup="true"
                aria-expanded="false"
                aria-label="Export options"
              >
                <svg viewBox="0 0 24 24" class="export-toggle-icon" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                  <polyline points="16 6 12 2 8 6"></polyline>
                  <line x1="12" y1="2" x2="12" y2="15"></line>
                </svg>
              </button>
              
              <div id="export-menu" class="export-menu hidden" role="menu" aria-labelledby="export-menu-toggle">
                <ul class="menu-list">
                  <li><button id="export-csv" class="menu-item" role="menuitem">CSV (.csv)</button></li>
                  <li><button id="export-xlsx" class="menu-item" role="menuitem">Excel (.xlsx)</button></li>
                </ul>
              </div>
            </div>
          </div>

          <div id="saved-loading" class="content-loading hidden">
            <p>Loading saved companies…</p>
          </div>

          <div id="saved-empty" class="content-empty hidden">
            <p>No saved companies yet.</p>
          </div>

          <div id="saved-list" class="saved-list"></div>
        </div>

      </div>
    </div>

    <script src="extension/supabase.bundle.js"></script>
    <script type="module" src="extension/sidepanel.bundle.js"></script>
  </body>
</html>
