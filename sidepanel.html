<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SignalizeAI Auth</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div class="container">
      <div id="login-view">
        <div class="login-header">
          <h1>SignalizeAI</h1>
          <p>Please sign in to access your extension features.</p>
        </div>

        <button id="google-signin">
          <img src="icons/google.svg" alt="Google" class="google-icon" />
          Sign in with Google
        </button>

        <p id="status-msg"></p>
      </div>

      <div id="welcome-view" class="hidden">
        <div class="dropdown-card">
          <div class="dropdown-header" id="dropdown-header">
            <div class="user-details">
              <span class="user-name-text">SignalizeAI</span>
              <span class="user-email-text">Cursor for sales pages</span>
            </div>
            <div style="display: flex; align-items: center; gap: 12px">
              <div id="user-initial" class="user-avatar-placeholder">U</div>
              <img
                id="dropdown-chevron"
                src="icons/chevron-down.svg"
                alt=""
                class="dropdown-chevron"
              />
            </div>
          </div>

          <div class="dropdown-content" id="dropdown-content">
            <ul class="menu-list">
              <li>
                <a href="#" class="menu-item" id="menu-profile">
                  <img src="icons/profile.svg" alt="" class="menu-icon" />
                  Profile
                </a>
              </li>
              <li>
                <a href="#" class="menu-item" id="menu-saved-analyses">
                  <img src="icons/bookmark.svg" alt="" class="menu-icon" />
                  Saved analyses
                </a>
              </li>
              <li>
                <a href="https://discord.gg/cx8quMHF" class="menu-item" target="_blank" rel="noopener noreferrer">
                  <img src="icons/discord-icon.svg" alt="" class="menu-icon" />
                  Discord Community
                  <span class="badge badge-plus">+</span>
                </a>
              </li>
              <li>
                <a href="#" class="menu-item">
                  <img src="icons/subscription.svg" alt="" class="menu-icon" />
                  Subscription
                  <span class="badge badge-pro">PRO</span>
                </a>
              </li>
              <li>
                <a href="https://github.com/SignalizeAI/Signalize" class="menu-item" target="_blank" rel="noopener noreferrer">
                  <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 5v14"/><path d="M5 12h14"/><circle cx="12" cy="12" r="9"/></svg>
                  Contribute Code
                </a>
              </li>
              <li>
                <a href="#" class="menu-item" id="menu-settings">
                  <img src="icons/settings.svg" alt="" class="menu-icon" />
                  Settings
                </a>
              </li>
            </ul>

            <div class="menu-divider"></div>

            <ul class="menu-list">
              <li>
                <a href="#" class="menu-item">
                  <img src="icons/help.svg" alt="" class="menu-icon" />
                  Help center
                </a>
              </li>
              <li>
                <button id="sign-out" class="menu-item link-button">
                  <img src="icons/sign-out.svg" alt="" class="menu-icon" />
                  Sign out
                </button>
              </li>
            </ul>
          </div>
        </div>

        <!-- AI Business Analysis -->
        <div id="ai-analysis" class="website-content-card hidden">
          <div class="content-header">
            <h3 class="content-title">Website Information</h3>
            <div style="display:flex; gap:8px;">
              <button class="copy-btn" id="copyButton" title="Copy website info">
                <svg viewBox="0 0 24 24" class="copy-icon">
                  <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>
              <button class="refresh-btn" id="refreshButton" title="Re-analyze">
                <svg viewBox="0 0 24 24" class="refresh-icon">
                  <path d="M21 12a9 9 0 1 1-3-6.7"/>
                  <polyline points="21 3 21 9 15 9"/>
                </svg>
              </button>
              <button class="save-btn" id="saveButton" title="Save">
                <svg viewBox="0 0 24 24" class="save-icon">
                  <path
                    d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
                  ></path>
                </svg>
              </button>
            </div>
          </div>

          <div id="ai-loading" class="content-loading hidden">
            <p>Analyzing business signals…</p>
          </div>

          <div id="ai-data" class="content-data hidden">
            <div class="content-section">
              <h4 class="section-label">Title</h4>
              <p id="ai-title-text" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">What they do</h4>
              <p id="ai-what-they-do" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">Target customer</h4>
              <p id="ai-target-customer" class="content-text">—</p>
            </div>

            <div class="content-section">
              <h4 class="section-label">Value proposition</h4>
              <p id="ai-value-prop" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">Sales readiness</h4>
              <p id="ai-sales-score" class="content-text">—</p>
            </div>

            <div class="content-section">
              <h4 class="section-label">Best sales persona recommendation</h4>
              <p id="ai-sales-persona" class="content-text">—</p>
              <p id="ai-sales-persona-reason" class="content-text" style="font-size: 13px; opacity: 0.8;">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">Sales angle</h4>
              <p id="ai-sales-angle" class="content-text">—</p>
            </div>

            <div class="content-section">
              <h4 class="section-label">Company overview</h4>
              <p id="ai-description-text" class="content-text">—</p>
            </div>
            
            <div class="content-section">
              <h4 class="section-label">URL</h4>
              <a id="ai-url-text" href="#" target="_blank" class="content-url">—</a>
            </div>

          </div>
        </div>

        <!-- Saved Analyses -->
        <div id="saved-analyses" class="website-content-card hidden">
          <div class="content-header">
            <h3 class="content-title">Saved Analyses</h3>
            <div class="header-actions-right">
              <button
                id="filter-toggle"
                class="secondary-btn"
                title="Filter saved analyses"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <svg
                  viewBox="0 0 24 24"
                  width="18"
                  height="18"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="3 4 21 4 14 12 14 19 10 21 10 12 3 4"></polygon>
                </svg>
              </button>

              <!-- Filter Panel -->
              <div id="filter-panel" class="filter-panel hidden">
                <div class="filter-header">
                  <h4>Filter</h4>
                  <span class="filter-reset">Reset</span>
                </div>

                <div class="filter-group">
                  <div class="filter-label-row">
                    <span class="filter-label">Score readiness</span>
                    <span class="filter-value" id="filter-score-value">0 – 100</span>
                  </div>

                  <input
                    type="range"
                    id="filter-sales-score"
                    min="0"
                    max="100"
                    value="0"
                    step="1"
                    class="filter-range"
                  />
                </div>

                <div class="filter-group">
                  <div class="filter-label">Best sales persona</div>
                  <select class="filter-select" id="filter-persona">
                    <option value="">All Personas</option>
                    <option value="founder / ceo">Founder / CEO</option>
                    <option value="enterprise account executive">Enterprise Account Executive</option>
                    <option value="mid-market ae">Mid-Market AE</option>
                    <option value="smb sales rep">SMB Sales Rep</option>
                    <option value="product-led growth (plg)">Product-Led Growth (PLG)</option>
                    <option value="partnerships / alliances">Partnerships / Alliances</option>
                  </select>
                </div>

                <button class="filter-apply">Apply</button>
              </div>

              <div class="export-actions">
                <button
                  id="export-menu-toggle"
                  class="secondary-btn"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-label="Export options"
                >
                  <svg
                    viewBox="0 0 24 24"
                    class="export-toggle-icon"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                    <polyline points="16 6 12 2 8 6"></polyline>
                    <line x1="12" y1="2" x2="12" y2="15"></line>
                  </svg>
                </button>
                <div
                  id="export-menu"
                  class="export-menu hidden"
                  role="menu"
                  aria-labelledby="export-menu-toggle"
                >
                  <ul class="menu-list">
                    <li>
                      <button id="export-csv" class="menu-item" role="menuitem">
                        CSV (.csv)
                      </button>
                    </li>
                    <li>
                      <button id="export-xlsx" class="menu-item" role="menuitem">
                        Excel (.xlsx)
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>


          <div id="saved-loading" class="content-loading hidden">
            <p>Loading saved companies…</p>
          </div>

          <div id="saved-empty" class="content-empty hidden">
            <p>No saved companies yet.</p>
          </div>

          <div id="saved-list" class="saved-list"></div>
        </div>

        <!-- Settings -->
        <div id="settings-view" class="website-content-card hidden">
          <div class="content-header">
            <h3 class="content-title">Settings</h3>
          </div>
          <div class="settings-section">

            <div class="setting-row">
              <label class="setting-label">
                <input type="checkbox" id="setting-auto-reanalysis" checked />
                Auto re-analysis
              </label>
              <p class="setting-help">
                Automatically analyze sites when switching tabs
              </p>
            </div>

            <div
              id="reanalysis-section"
              class="settings-section"
            >
              <div class="setting-row">
                <div class="setting-label">Re-analysis behavior</div>

                <label class="setting-option">
                  <input type="radio" name="reanalysis-mode" value="content-change" checked />
                  Only if content changes
                </label>

                <label class="setting-option">
                  <input type="radio" name="reanalysis-mode" value="always" />
                  Always re-run
                </label>

                <label class="setting-option">
                  <input type="radio" name="reanalysis-mode" value="manual" />
                  Manual only
                </label>
              </div>
            </div>

            <div class="setting-row">
              <div class="setting-label">Default copy format</div>

              <label class="setting-option">
                <input type="radio" name="copy-format" value="short" checked />
                Short summary
              </label>

              <label class="setting-option">
                <input type="radio" name="copy-format" value="full" />
                Full analysis
              </label>
            </div>

            <div class="setting-row">
              <button id="clear-cache-btn" class="secondary-btn danger">
                Clear local cache
              </button>
              <p class="setting-help">
                Clears temporary analysis data stored locally
              </p>
            </div>
          </div>
        </div>

        <!-- Profile -->
        <div id="profile-view" class="website-content-card hidden">
          <div class="content-header">
            <h3 class="content-title">Profile</h3>
          </div>

          <div class="profile-section">
            <div class="profile-row">
              <span class="profile-label">Name</span>
              <span class="profile-value" id="profile-name">—</span>
            </div>

            <div class="profile-row">
              <span class="profile-label">Email</span>
              <span class="profile-value" id="profile-email">—</span>
            </div>
          </div>

          <div class="profile-section">
            <div class="profile-row">
              <span class="profile-label">Plan</span>
              <span class="profile-value">Free</span>
            </div>

            <div class="profile-row">
              <span class="profile-label">Usage limit</span>
              <span class="profile-value">100 / month</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="extension/supabase.bundle.js"></script>
    <script type="module" src="extension/sidepanel.bundle.js"></script>
  </body>
</html>
